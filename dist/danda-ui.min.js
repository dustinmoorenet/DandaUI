var G={};G.Input={},G.Panel={};var U={};G.Input.Button=Backbone.View.extend({tagName:"button",events:{click:"onClick",touchstart:"onTouchStart",mousedown:"onMouseDown",keydown:"onKeyDown"},initialize:function(){this.onDone=this.onDone.bind(this),this.onCancel=this.onCancel.bind(this)},setText:function(a){this.text_class&&this.$el.removeClass(this.text_class),this.text=a,this.text_class=a.replace(" ","-").toLowerCase(),this.$el.text(a),this.$el.addClass(this.text_class)},disable:function(a){a?this.$el.prop("disabled",!0):this.$el.removeProp("disabled")},onClick:function(a){a.preventDefault()},onKeyDown:function(a){(13===a.which||32===a.which)&&(this.onStart(),window.setTimeout(this.onDone,200))},onTouchStart:function(){this.onStart(),this.touch=!0,$("body").on("touchend."+this.cid,this.onDone),$("body").on("touchmove."+this.cid,this.onCancel),window.setTimeout(this.onCancel,500)},onMouseDown:function(){this.touch||(this.onStart(),$("body").on("mouseup."+this.cid,this.onDone))},onStart:function(){this.cleanUp(),this.$el.addClass("active")},onDone:function(){return this.canceled?(this.cleanUp(),void 0):(this.cleanUp(),this.trigger("tap",this),this.text_class&&this.trigger("tap-"+this.text_class,this),void 0)},onCancel:function(){this.canceled=!0,this.$el.removeClass("active")},cleanUp:function(){this.touch=!1,this.canceled=!1,$("body").off("."+this.cid),this.$el.removeClass("active")}}),G.Input.Select=Backbone.View.extend({className:"select",template:_.template('<button class="display"></button><div class="options"></div>'),initialize:function(){this.$select=$(this.options.select||$("<select />")),this.$select.remove().appendTo(this.el),this.render()},render:function(){this.$el.append(this.template()),this.display=new G.Input.Button({el:this.$(".display")}),this.listenTo(this.display,"tap",this.toggleDisplay)},copyOptions:function(){var a=$("option",this.$select).remove();a.forEach(function(a){this.addOption({value:a.value,name:$(a).text()})}.bind(this))},addOption:function(a){var b=$("<option />").text(a.text).val(a.value);this.$select.append(b),b=$("<div />").text(a.text).attr("value",a.value),this.$(".options").append(b)},removeOption:function(){},toggleDisplay:function(){this.$el.toggleClass("show")}}),G.Input.Text=Backbone.View.extend({tagName:"input",attributes:{type:"text"},disable:function(a){a?this.$el.prop("disabled",!0):this.$el.removeProp("disabled")}}),G.Input.ToggleButtons=Backbone.View.extend({className:"toggle-buttons",initialize:function(){this.buildButtons(this.options.buttons||[]),this.listenTo(this,"tap",this.setChecked)},buildButtons:function(a){a.forEach(this.buildButton.bind(this))},buildButton:function(a){var b=new G.Input.Button;b.setText(a),this.$el.append(b.el),this.listenTo(b,"all",this.onButtonEvent)},setChecked:function(a){this.$("button").removeClass("checked"),a.$el.addClass("checked")},onButtonEvent:function(){this.trigger.apply(this,arguments)}}),G.Panel.Base=Backbone.View.extend({className:"base panel"});